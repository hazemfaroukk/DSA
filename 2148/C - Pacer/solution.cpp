#include <bits/stdc++.h>using namespace std;#define ll long long  int main(){    ios_base::sync_with_stdio(false);cin.tie(0);cout.tie(0);    int t; cin>>t;    while(t--){        int n,w; cin>>n>>w;        map <int,int> mp;        int cur=0,p=w,l=0;        for(int i=0;i<n;i++){            int x,y; cin>>x>>y;            mp[x]=y;        }        int now=0;        for (auto [i,v]:mp){            if ((i-now)%2==0){                cur=!mp[now];            }            else{cur=mp[now];}            if (v==cur){l++;cur=v;}            now=i;        }        cout << p-l << endl;     }    return 0;}